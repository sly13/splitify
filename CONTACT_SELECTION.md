# –í—ã–±–æ—Ä –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ Telegram Web Apps

## ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram Web Apps

**Telegram Web Apps –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:**

- `selectContact()` - –≤—ã–±–æ—Ä –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–æ—Å—Ç—É–ø –∫ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–ª—É—á–µ–Ω–∏–µ username –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π –∫–Ω–∏–≥–∏

–≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ Telegram.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **–°–∏—Å—Ç–µ–º–∞ –¥—Ä—É–∑–µ–π (ContactSelector)**

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```tsx
<ContactSelector
  onSelect={contact => {
    // contact: { id, name, telegramUsername }
    console.log("–í—ã–±—Ä–∞–Ω –∫–æ–Ω—Ç–∞–∫—Ç:", contact);
  }}
  placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –¥—Ä—É–∑–µ–π"
/>
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –í—ã–±–æ—Ä –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ username
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ @ –∫ username
- –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∞–≤–∞—Ç–∞—Ä—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏

### 2. **–£–º–Ω—ã–π –≤–≤–æ–¥ username (UsernameInput)**

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:

```tsx
<UsernameInput
  value={username}
  onChange={setUsername}
  suggestions={["@alexey_crypto", "@maria_tg"]}
  placeholder="–í–≤–µ–¥–∏—Ç–µ @username"
/>
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ @
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ username
- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ —Å–æ–≤–µ—Ç—ã

### 3. **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (ParticipantAdder)**

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:

```tsx
<ParticipantAdder
  participants={participants}
  onParticipantsChange={setParticipants}
  totalAmount={100}
  splitType="equal"
/>
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –í—ã–±–æ—Ä –∏–∑ –¥—Ä—É–∑–µ–π –∏–ª–∏ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—â–µ–π —Å—É–º–º—ã
- –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

## üîÆ –ë—É–¥—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Telegram Web Apps API (–µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è)

```typescript
// –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π API (–ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
const contact = await window.Telegram.WebApp.selectContact();
// contact: { phone_number, first_name, last_name, user_id }
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

#### 1. **QR-–∫–æ–¥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è**

```tsx
const generateQRCode = (billId: string) => {
  const shareUrl = `https://t.me/your_bot?start=bill_${billId}`;
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
};
```

#### 2. **–°—Å—ã–ª–∫–∏ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è**

```tsx
const generateInviteLink = (billId: string) => {
  return `https://t.me/your_bot?start=bill_${billId}`;
};
```

#### 3. **–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—á–µ—Ä–µ–∑ –±–æ—Ç–∞)**

```typescript
// –ß–µ—Ä–µ–∑ Telegram Bot API (—Ç—Ä–µ–±—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–æ—Ç–æ–º)
const searchUser = async (phoneNumber: string) => {
  const response = await fetch(`/api/bot/search-user`, {
    method: "POST",
    body: JSON.stringify({ phoneNumber }),
  });
  return response.json();
};
```

## üì± UX —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. **–ü–æ—ç—Ç–∞–ø–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ**

1. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤—ã–±–æ—Ä –∏–∑ –¥—Ä—É–∑–µ–π
2. –ó–∞—Ç–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
3. –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –Ω–µ–¥–∞–≤–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö

### 2. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**

- –ê–≤–∞—Ç–∞—Ä—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏
- –°—Ç–∞—Ç—É—Å—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω/–≥–æ—Å—Ç—å)
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏

### 3. **–£–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏**

- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É username

## üõ†Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CreateBillPage

```tsx
import { ParticipantAdder } from "../components/ParticipantAdder";

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å—á–µ—Ç–∞
<ParticipantAdder
  participants={participants}
  onParticipantsChange={setParticipants}
  totalAmount={parseFloat(totalAmount)}
  splitType={splitType}
/>;
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤

```typescript
interface Participant {
  id: string;
  name: string;
  telegramUsername?: string;
  telegramUserId?: string;
  shareAmount: string;
}
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º
2. **–£–¥–æ–±—Å—Ç–≤–æ** - –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö Telegram

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã TypeScript
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ CreateBillPage
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∏–ª–∏ –ø–æ–¥ —Ç–µ–º—É Telegram
